<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>50th Anniversary - Photo Gallery</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Loading Screen -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <div class="loading-ornament">&#10045;</div>
      <h1 class="loading-title">50<sup>th</sup> Anniversary</h1>
      <p class="loading-subtitle">Loading precious memories...</p>
      <div class="loading-bar">
        <div class="loading-bar-fill"></div>
      </div>
    </div>
  </div>

  <!-- Category Bar (above header) -->
  <div class="category-bar">
    <div class="category-bar-inner">
      <!-- All Photos -->
      <div class="category-group">
        <div class="category-group-items">
          <button class="filter-tab active" data-filter="all">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
              <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
            </svg>
            All Photos
            <span class="filter-count" id="count-all"></span>
          </button>
        </div>
      </div>

      <div class="category-separator"></div>

      <!-- Collections (dynamically rendered) -->
      <div class="category-group" id="collections-section">
        <div class="category-group-label">Collections</div>
        <div class="category-group-items" id="collection-tabs"></div>
      </div>

      <!-- Others (admin only) -->
      <div class="category-separator admin-only-el" style="display:none"></div>
      <div class="category-group admin-only-el" style="display:none">
        <div class="category-group-items">
          <button class="filter-tab filter-tab-others" data-filter="others" id="others-tab">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
            </svg>
            Others
            <span class="filter-count" id="count-others">0</span>
          </button>
        </div>
      </div>

      <!-- Admin: Publish Data -->
      <div class="category-separator admin-only-el" style="display:none"></div>
      <div class="category-group admin-only-el" style="display:none">
        <div class="category-group-items">
          <button class="filter-tab publish-btn" id="btn-publish" title="Publish album data so all guests can see your collections">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/>
              <polyline points="16 6 12 2 8 6"/>
              <line x1="12" y1="2" x2="12" y2="15"/>
            </svg>
            Publish Data
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-ornament">&#10045;</div>
    <h1 class="header-title">50<sup>th</sup> Anniversary</h1>
    <p class="header-subtitle">Celebrating 50 Golden Years Together</p>
    <div class="header-ornament">&#10045;</div>
  </header>

  <!-- Top Bar -->
  <div class="top-bar">
    <div class="top-bar-left">
      <div class="size-toggle" title="Thumbnail size">
        <button class="size-btn" data-size="small" title="Small">S</button>
        <button class="size-btn active" data-size="medium" title="Medium">M</button>
        <button class="size-btn" data-size="large" title="Large">L</button>
      </div>
    </div>
    <div class="top-bar-right">
      <button id="btn-gallery" class="control-btn active" title="Gallery View">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/>
          <rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/>
        </svg>
        <span class="btn-text">Gallery</span>
      </button>
      <button id="btn-slideshow" class="control-btn" title="Slideshow">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="5 3 19 12 5 21 5 3"/>
        </svg>
        <span class="btn-text">Slideshow</span>
      </button>
      <button id="btn-admin" class="admin-toggle" title="Admin mode">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0110 0v4"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Jump Slider -->
  <div class="jump-bar">
    <span class="jump-label" id="jump-label">Photo 1</span>
    <input type="range" id="jump-slider" class="jump-slider" min="0" max="100" value="0">
    <span class="jump-total" id="jump-total"></span>
  </div>

  <!-- Gallery Grid -->
  <main id="gallery" class="gallery gallery-medium"></main>

  <!-- Empty State -->
  <div id="empty-state" class="empty-state" style="display:none">
    <div class="empty-icon">&#128247;</div>
    <h2>No Photos Found</h2>
    <p>No photos match the current filter.</p>
  </div>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox">
    <div class="lightbox-backdrop"></div>
    <button class="lightbox-close" title="Close (Esc)">&times;</button>
    <button class="lightbox-prev" title="Previous (&larr;)">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="15 18 9 12 15 6"/>
      </svg>
    </button>
    <button class="lightbox-next" title="Next (&rarr;)">
      <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="9 18 15 12 9 6"/>
      </svg>
    </button>
    <div class="lightbox-content">
      <img id="lightbox-img" class="lightbox-img" src="" alt="">
      <div class="lightbox-info">
        <div class="lightbox-caption">
          <span id="lightbox-name"></span>
          <span id="lightbox-counter" class="lightbox-counter"></span>
        </div>
        <button id="lightbox-fav" class="lightbox-fav-btn" title="Add to favorites (F)">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
        </button>
        <button id="lightbox-delete" class="lightbox-delete-btn" title="Move to Others (D)" style="display:none">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/>
            <line x1="12" y1="11" x2="12" y2="17"/><line x1="9" y1="14" x2="15" y2="14"/>
          </svg>
        </button>
      </div>
    </div>
    <!-- Album Tags -->
    <div id="lightbox-albums" class="lightbox-albums">
      <span class="lightbox-albums-label">Albums:</span>
      <div id="lightbox-album-chips" class="lightbox-album-chips"></div>
      <button id="lightbox-add-album" class="lightbox-add-album-btn" title="Create new album">+</button>
    </div>
    <!-- Filmstrip -->
    <div id="filmstrip" class="filmstrip">
      <div id="filmstrip-track" class="filmstrip-track"></div>
    </div>
  </div>

  <!-- Slideshow -->
  <div id="slideshow" class="slideshow">
    <div class="slideshow-backdrop"></div>
    <img id="slideshow-img" class="slideshow-img" src="" alt="">
    <img id="slideshow-img-next" class="slideshow-img slideshow-img-hidden" src="" alt="">
    <div class="slideshow-controls">
      <button id="slideshow-prev" class="slideshow-btn" title="Previous">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"/>
        </svg>
      </button>
      <button id="slideshow-play" class="slideshow-btn slideshow-play-btn" title="Play/Pause">
        <svg id="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="5 3 19 12 5 21 5 3"/>
        </svg>
        <svg id="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none">
          <line x1="6" y1="4" x2="6" y2="20"/><line x1="18" y1="4" x2="18" y2="20"/>
        </svg>
      </button>
      <button id="slideshow-next" class="slideshow-btn" title="Next">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"/>
        </svg>
      </button>
      <button id="slideshow-close" class="slideshow-btn" title="Exit Slideshow (Esc)">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
    <div class="slideshow-caption">
      <span id="slideshow-name"></span>
      <span id="slideshow-counter" class="slideshow-counter"></span>
    </div>
    <div class="slideshow-progress">
      <div id="slideshow-progress-bar" class="slideshow-progress-bar"></div>
    </div>
  </div>

  <script src="config.js"></script>
  <script src="saved-data.js"></script>
  <script src="photos.js"></script>
  <script src="script.js"></script>
</body>
</html>
